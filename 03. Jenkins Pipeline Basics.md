# ğŸ§© **Jenkins Pipeline Basics (Step-by-Step Guide)**

---

## ğŸŒ± 1ï¸âƒ£ What Is a Jenkinsfile?

A **Jenkinsfile** is just a text file written in **Groovy syntax** that defines your pipeline â€” i.e., the set of automated steps Jenkins will execute.

ğŸ‘‰ It always starts with the keyword **`pipeline { }`**

Example:

```groovy
pipeline {
    agent any
    stages {
        stage('Build') {
            steps {
                echo 'Building...'
            }
        }
    }
}
```

---

## âš™ï¸ 2ï¸âƒ£ Pipeline Syntax: Two Main Types

| ğŸ§© Type                  | ğŸ“˜ Description                                  |
| ------------------------ | ----------------------------------------------- |
| **Declarative Pipeline** | Easier, structured format â€” beginner-friendly âœ… |
| **Scripted Pipeline**    | Groovy-based, more flexible but complex         |

Weâ€™ll focus on the **Declarative** type (used in most modern Jenkins setups).

---

## ğŸ§± 3ï¸âƒ£ **Structure of a Declarative Pipeline**

```
pipeline {
    agent any
    environment { ... }
    options { ... }
    parameters { ... }
    stages {
        stage('Name') {
            steps { ... }
        }
    }
    post { ... }
}
```

Let's break it down ğŸ‘‡

---

## ğŸ”¹ **pipeline { }**

This is the root block â€” it defines that you are writing a Jenkins pipeline.

```groovy
pipeline {
    // all other sections go inside this block
}
```

---

## ğŸ”¹ **agent**

The `agent` defines *where* the pipeline runs (on which Jenkins node/agent).

| Keyword                    | Description                                                     |
| -------------------------- | --------------------------------------------------------------- |
| `agent any`                | Run on any available Jenkins node                               |
| `agent none`               | Do not allocate an executor â€” used in parallel or matrix builds |
| `agent { label 'docker' }` | Run on a specific node/agent labeled "docker"                   |

Example:

```groovy
pipeline {
    agent any
}
```

---

## ğŸ”¹ **environment**

Defines environment variables that can be used anywhere in the pipeline.

Example:

```groovy
pipeline {
    agent any
    environment {
        APP_NAME = "HelloJenkins"
        DEPLOY_ENV = "staging"
    }
    stages {
        stage('Example') {
            steps {
                echo "Deploying ${APP_NAME} to ${DEPLOY_ENV}"
            }
        }
    }
}
```

---

## ğŸ”¹ **options**

Used to configure pipeline-wide settings.

Example:

```groovy
options {
    timeout(time: 10, unit: 'MINUTES')   // Stop the build if it runs too long
    buildDiscarder(logRotator(numToKeepStr: '5'))  // Keep only last 5 builds
}
```

---

## ğŸ”¹ **parameters**

Used to accept user input before running the pipeline â€” very useful in CI/CD ğŸ’¡

### Example: String, Boolean, Choice parameters

```groovy
parameters {
    string(name: 'USERNAME', defaultValue: 'guest', description: 'Enter your name')
    booleanParam(name: 'RUN_TESTS', defaultValue: true, description: 'Run tests?')
    choice(name: 'ENV', choices: ['dev', 'staging', 'prod'], description: 'Select environment')
}
```

Then you can use them in steps:

```groovy
steps {
    echo "Hello, ${params.USERNAME}"
    echo "Deploying to ${params.ENV}"
}
```

---

## ğŸ”¹ **stages**

This is the heart â¤ï¸ of your pipeline â€” where you define *what happens step by step*.

Each **`stage`** represents a logical section of your process:

* Build ğŸ—ï¸
* Test ğŸ§ª
* Deploy ğŸš€

Example:

```groovy
stages {
    stage('Build') {
        steps {
            echo 'Building...'
        }
    }
    stage('Test') {
        steps {
            echo 'Testing...'
        }
    }
}
```

---

## ğŸ”¹ **steps**

This block defines the actual commands that run inside each stage.

Common step types:

| Command           | Description                                   |
| ----------------- | --------------------------------------------- |
| `echo 'text'`     | Print message to console                      |
| `sh 'command'`    | Run shell command (Linux/Mac)                 |
| `bat 'command'`   | Run Windows command                           |
| `input 'message'` | Pause pipeline and wait for user input        |
| `script { ... }`  | Write Groovy code inside declarative pipeline |

Example:

```groovy
steps {
    echo 'Running build step...'
    sh 'ls -l'
}
```

---

## ğŸ”¹ **post**

Defines what happens after the pipeline or each stage finishes.
You can specify different blocks for `success`, `failure`, or `always`.

Example:

```groovy
post {
    always {
        echo 'Cleaning up...'
    }
    success {
        echo 'âœ… Build succeeded!'
    }
    failure {
        echo 'âŒ Build failed!'
    }
}
```

---

## ğŸŒŸ **Putting It All Together**

Hereâ€™s a full annotated Jenkinsfile showing everything weâ€™ve learned:

```groovy
pipeline {
    agent any

    environment {
        APP_NAME = "MyFirstApp"
    }

    options {
        timeout(time: 10, unit: 'MINUTES')
    }

    parameters {
        choice(name: 'DEPLOY_ENV', choices: ['dev', 'staging', 'prod'], description: 'Select Environment')
    }

    stages {

        stage('Build') {
            steps {
                echo "ğŸ—ï¸ Building ${APP_NAME}..."
                sh 'echo "Simulating build..."'
            }
        }

        stage('Test') {
            steps {
                echo 'ğŸ§ª Running tests...'
                sh 'echo "Running unit tests..."'
            }
        }

        stage('Deploy') {
            steps {
                echo "ğŸš€ Deploying to ${params.DEPLOY_ENV}"
                sh 'echo "Deploy complete."'
            }
        }
    }

    post {
        success {
            echo 'âœ… Pipeline completed successfully!'
        }
        failure {
            echo 'âŒ Something went wrong.'
        }
    }
}
```

---

## ğŸ§  **Bonus: Useful Expressions**

| Expression            | Meaning                     |
| --------------------- | --------------------------- |
| `${params.NAME}`      | Access a parameter value    |
| `${env.BUILD_NUMBER}` | Get Jenkins build number    |
| `${env.BRANCH_NAME}`  | Current Git branch name     |
| `${env.JOB_NAME}`     | Jenkins job name            |
| `${env.WORKSPACE}`    | Workspace path              |
| `${APP_NAME}`         | Custom environment variable |

---

## ğŸ“Š **Visual Summary: Pipeline Tree**

```
ğŸŒ³ Jenkinsfile
â”‚
â”œâ”€â”€ pipeline
â”‚   â”œâ”€â”€ agent
â”‚   â”œâ”€â”€ environment
â”‚   â”œâ”€â”€ options
â”‚   â”œâ”€â”€ parameters
â”‚   â”œâ”€â”€ stages
â”‚   â”‚   â”œâ”€â”€ stage('Build')
â”‚   â”‚   â”‚   â””â”€â”€ steps { ... }
â”‚   â”‚   â”œâ”€â”€ stage('Test')
â”‚   â”‚   â”‚   â””â”€â”€ steps { ... }
â”‚   â”‚   â””â”€â”€ stage('Deploy')
â”‚   â”‚       â””â”€â”€ steps { ... }
â”‚   â””â”€â”€ post
â”‚       â”œâ”€â”€ success { ... }
â”‚       â””â”€â”€ failure { ... }
```

---

## ğŸ **Summary**

| Concept       | Description  | Example                  |
| ------------- | ------------ | ------------------------ |
| `pipeline`    | Main block   | `pipeline { ... }`       |
| `agent`       | Where to run | `agent any`              |
| `environment` | Define vars  | `APP_NAME = "MyApp"`     |
| `options`     | Config       | `timeout(10)`            |
| `parameters`  | User inputs  | `choice(...)`            |
| `stages`      | Main flow    | `stage('Build') { ... }` |
| `steps`       | Actions      | `echo`, `sh`, `input`    |
| `post`        | After stages | `success`, `failure`     |

---

âœ… **Now you know the grammar of Jenkins pipelines!**
From here, you can easily read, write, and customize pipelines â€” whether simple or complex.

---

