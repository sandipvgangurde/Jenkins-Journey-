```groovy
pipeline {
    agent any  // Run this pipeline on any available agent

    // -----------------------------
    // Environment Variables 
    // -----------------------------
    environment {
        DEPLOY_ENV = 'staging' // Can be 'staging' or 'production'
    }

    stages {
        // -----------------------------
        // Stage 1: Build 
        // -----------------------------
        stage("Build Project") {
            steps {
                echo "This is the build stage"
                // Add your build commands here, e.g., sh './gradlew build'
            }       
        }

        // -----------------------------
        // Stage 2: Testing (Parallel)
        // -----------------------------
        stage("Run Unit Tests") {
            parallel {
                stage("Unit Test 1") {
                    steps {
                        echo "Running Unit Test 1"
                        // Add test command here, e.g., sh './gradlew test1'
                    }
                }
               
                stage("Unit Test 2") {
                    steps {
                        echo "Running Unit Test 2"
                        // Add test command here, e.g., sh './gradlew test2'
                    }
                }
            }
        }
            
        // -----------------------------
        // Stage 3: Deploy to Staging Server 
        // -----------------------------
        stage("Deploy to Staging Server") {
            when {
                expression { env.DEPLOY_ENV == 'staging' }
            }
            steps {
                echo "Deploying application to STAGING server"
                // Add deployment commands here, e.g., sh './deploy.sh staging'
            }
        }

        // -----------------------------
        // Stage 4: Deploy to Production Server 
        // -----------------------------
        stage("Deploy to Production Server") {
            when {
                expression { env.DEPLOY_ENV == 'production' }
            }
            steps {
                echo "Deploying application to PRODUCTION server"
                // Add deployment commands here, e.g., sh './deploy.sh prod'
            }
        }
    }

    // -----------------------------
    // Optional: Post Actions 
    // -----------------------------
    post {
        success {
            echo "Pipeline completed successfully!"
        }
        failure {
            echo "Pipeline failed. Check logs for details."
        }
    }
}


```
